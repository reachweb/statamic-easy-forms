function l(a="formSubmitted"){return{formHandle:a,submitData:{},errors:{},fatalError:!1,disableSubmit:!1,successMessage:!1,hasReCaptcha:!1,init(){},updateSubmitData(e){this.submitData=e},async formSubmit(){this.$refs.form.dispatchEvent(new CustomEvent("form:submit",{bubbles:!0,detail:{submitData:this.submitData,formHandle:this.formHandle}}));try{this.clearErrors(),this.toggleSubmit();const r=this.buildFormData(null),i=await fetch(this.$refs.form.action,{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:r});if(!i.ok){await this.handleErrors(i),this.toggleSubmit();return}const t=await i.json();this.handleSuccess(t)}catch(e){this.fatalError=!0,this.toggleSubmit(),this.$refs.form.dispatchEvent(new CustomEvent("form:error",{bubbles:!0,detail:{error:e.message,fatalError:!0,formHandle:this.formHandle}}))}},buildFormData(e){const r=new FormData;return Object.entries(this.submitData).forEach(([i,t])=>{t instanceof FileList?Array.from(t).forEach(s=>r.append(`${i}[]`,s)):t instanceof File?r.append(i,t):Array.isArray(t)?t.forEach(s=>r.append(`${i}[]`,s)):t!=null&&r.append(i,t)}),r.append("_token",this.$refs.form.dataset.csrfToken),e&&r.append("g-recaptcha-response",e),r},toggleSubmit(){this.disableSubmit=!this.disableSubmit},handleSuccess(e){e.success&&(this.successMessage=!0,this.$refs.form.dispatchEvent(new CustomEvent("form:success",{bubbles:!0,detail:{data:e,submitData:this.submitData,formHandle:this.formHandle}})))},async handleErrors(e){try{if(e.status===500)this.fatalError=!0;else{const r=await e.json();this.errors=r?.error||r?.errors||{}}this.$refs.form.dispatchEvent(new CustomEvent("form:error",{bubbles:!0,detail:{errors:this.errors,status:e.status,fatalError:this.fatalError,formHandle:this.formHandle}})),this.$nextTick(()=>{this.scrollToFirstError()})}catch{this.fatalError=!0,this.$refs.form.dispatchEvent(new CustomEvent("form:error",{bubbles:!0,detail:{errors:{},fatalError:!0,formHandle:this.formHandle}}))}},scrollToFirstError(){if(Object.keys(this.errors).length===0)return;const e=Object.keys(this.errors)[0],r=this.$refs.form.querySelector(`label[for="${e}"]`),i=r?r.closest("div"):this.$refs.form.querySelector(`#${e}`);if(!i)return;const t=i.getBoundingClientRect();t.top>=0&&t.bottom<=window.innerHeight||i.scrollIntoView({behavior:"smooth",block:"center"})},clearErrors(){this.errors={},this.fatalError=!1},loadReCaptcha(){},getReCaptchaToken(){return new Promise((e,r)=>{{e(null);return}})}}}function h(a,e,r,i){return{submitFields:{},fields:[],fieldsMap:{},honeypot:"",init(){this.honeypot=e,this.fields=a.filter(s=>s.input_type!=="hidden").filter(s=>!r.includes(s.handle)),this.submitFields=this.initializeFields(a),this.fieldsMap=a.reduce((s,o)=>({...s,[o.handle]:o}),{}),i&&Object.keys(i).length>0&&this.loadPrepopulatedData(i);let t;this.$watch("submitFields",()=>{clearTimeout(t),t=setTimeout(()=>{this.$dispatch("fields-changed",this.submitFields)},100)},{deep:!0}),this.$nextTick(()=>{this.$dispatch("fields-changed",this.submitFields)})},shouldShowField(t){const s=this.fieldsMap[t];if(!s)return!1;try{return typeof window.Statamic>"u"||!window.Statamic?.$conditions?.showField?!0:window.Statamic.$conditions.showField(s,this.submitFields)}catch{return!0}},initializeFields(t){return t.reduce((s,o)=>{let n;return o.type==="assets"?n=null:o.type==="checkboxes"?n=o.default||[]:n=o.default||"",{...s,[o.handle]:n}},{})},loadPrepopulatedData(t){const s={...this.submitFields};Object.keys(t).forEach(o=>{s.hasOwnProperty(o)&&(s[o]=t[o])}),this.submitFields=s}}}window.formHandler=l;window.formFields=h;
