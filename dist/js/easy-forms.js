function h(n="formSubmitted"){return{eventName:n,submitData:{},errors:{},fatalError:!1,disableSubmit:!1,successMessage:!1,hasReCaptcha:!1,init(){},updateSubmitData(s){this.submitData=s},async formSubmit(){try{this.clearErrors(),this.toggleSubmit();const e=this.buildFormData(null),a=await fetch(this.$refs.form.action,{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:e});if(!a.ok){await this.handleErrors(a),this.toggleSubmit();return}const t=await a.json();this.handleSuccess(t)}catch{this.fatalError=!0,this.toggleSubmit()}},buildFormData(s){const e=new FormData;return Object.entries(this.submitData).forEach(([a,t])=>{t instanceof FileList?Array.from(t).forEach(i=>e.append(`${a}[]`,i)):t instanceof File?e.append(a,t):Array.isArray(t)?t.forEach(i=>e.append(`${a}[]`,i)):t!=null&&e.append(a,t)}),e.append("_token",this.$refs.form.dataset.csrfToken),s&&e.append("g-recaptcha-response",s),e},toggleSubmit(){this.disableSubmit=!this.disableSubmit},handleSuccess(s){s.success&&(this.successMessage=!0,this.trackAnalytics())},async handleErrors(s){try{if(s.status===500)this.fatalError=!0;else{const e=await s.json();this.errors=e?.error||e?.errors||{}}}catch{this.fatalError=!0}},clearErrors(){this.errors={},this.fatalError=!1},trackAnalytics(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({custEmail:this.submitData.email,custPhone:this.submitData.phone,FB_Event_ID:window.Cookies.get("XSRF-TOKEN"),event:this.eventName})},loadReCaptcha(){},getReCaptchaToken(){return new Promise((s,e)=>{{s(null);return}})}}}function l(n,s,e,a){return{submitFields:{},fields:[],fieldsMap:{},honeypot:"",init(){this.honeypot=s,this.fields=n.filter(t=>t.input_type!=="hidden").filter(t=>!e.includes(t.handle)),this.submitFields=this.initializeFields(n),this.fieldsMap=n.reduce((t,i)=>({...t,[i.handle]:i}),{}),Object.values(a).length>0&&this.loadPrepopulatedData(a),this.$watch("submitFields",()=>{this.$dispatch("fields-changed",this.submitFields)},{deep:!0}),this.$nextTick(()=>{this.$dispatch("fields-changed",this.submitFields)})},shouldShowField(t){const i=this.fieldsMap[t];return i?Statamic.$conditions.showField(i,this.submitFields):!1},initializeFields(t){return t.reduce((i,r)=>{let o;return r.type==="assets"?o=null:r.type==="checkboxes"?o=r.default||[]:o=r.default||"",{...i,[r.handle]:o}},{})},loadPrepopulatedData(t){const i={...this.submitFields};Object.keys(t).forEach(r=>{i.hasOwnProperty(r)&&(i[r]=t[r])}),this.submitFields=i}}}window.formHandler=h;window.formFields=l;
