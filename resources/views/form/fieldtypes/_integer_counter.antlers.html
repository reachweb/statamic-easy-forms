{{ field_id = field_key ? (field_key | replace:'.':'_') : (parent_handle ? "{parent_handle}_{handle}" : handle) }}
<div
    x-data="{
        minVal: {{ if min_value || min_value === 0 }}{{ min_value }}{{ else }}0{{ /if }},
        maxVal: {{ if max_value || max_value === 0 }}{{ max_value }}{{ else }}null{{ /if }},
        incrementAmount: {{ increment_amount ?? 1 }}
    }"
    class="flex flex-col gap-1"
>
    <div
        x-on:dblclick.prevent
        class="flex items-center"
        role="group"
        aria-labelledby="{{ form_id }}_{{ field_id }}-label"
        {{ if has_own_instructions }}aria-describedby="{{ form_id }}_{{ field_id }}-description"{{ /if }}
    >
        <button
            type="button"
            x-on:click="submitFields['{{ field_key ?? handle }}'] = Math.max(minVal, Number(submitFields['{{ field_key ?? handle }}']) - incrementAmount); $dispatch('validate-field', '{{ field_key ?? handle }}')"
            :disabled="Number(submitFields['{{ field_key ?? handle }}']) <= minVal"
            :class="Number(submitFields['{{ field_key ?? handle }}']) <= minVal ? 'opacity-50 cursor-not-allowed' : 'hover:opacity-75 active:opacity-100 cursor-pointer'"
            class="flex h-10 items-center justify-center rounded-l-ef border border-ef-border bg-ef-input-bg px-4 py-2 text-ef-input-text focus:outline-none focus:ring-2 focus:ring-ef-focus"
            :aria-label="'{{ 'Subtract' | trans }} ' + incrementAmount"
        >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" stroke="currentColor" fill="none" stroke-width="2" class="size-4">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15"/>
            </svg>
        </button>
        <input
            x-model.number="submitFields['{{ field_key ?? handle }}']"
            id="{{ form_id }}_{{ field_id }}"
            name="{{ field_name ?? handle }}"
            type="number"
            inputmode="numeric"
            :min="minVal"
            :max="maxVal"
            class="h-10 w-20 rounded-none border-y border-ef-border bg-ef-input-bg/50 text-center text-ef-input-text focus:outline-none focus:ring-2 focus:ring-ef-focus [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
            aria-live="polite"
        />
        <button
            type="button"
            x-on:click="submitFields['{{ field_key ?? handle }}'] = maxVal !== null ? Math.min(maxVal, Number(submitFields['{{ field_key ?? handle }}']) + incrementAmount) : Number(submitFields['{{ field_key ?? handle }}']) + incrementAmount; $dispatch('validate-field', '{{ field_key ?? handle }}')"
            :disabled="maxVal !== null && Number(submitFields['{{ field_key ?? handle }}']) >= maxVal"
            :class="maxVal !== null && Number(submitFields['{{ field_key ?? handle }}']) >= maxVal ? 'opacity-50 cursor-not-allowed' : 'hover:opacity-75 active:opacity-100 cursor-pointer'"
            class="flex h-10 items-center justify-center rounded-r-ef border border-ef-border bg-ef-input-bg px-4 py-2 text-ef-input-text focus:outline-none focus:ring-2 focus:ring-ef-focus"
            :aria-label="'{{ 'Add' | trans }} ' + incrementAmount"
        >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" stroke="currentColor" fill="none" stroke-width="2" class="size-4">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"/>
            </svg>
        </button>
    </div>
</div>
